ğŸš€ Ignite Plugin - IntelliJ Arthas Integration
==============================================

**Ignite** æ˜¯ä¸€æ¬¾ä¸“ä¸º IntelliJ IDEA è®¾è®¡çš„å¼€å‘æ•ˆèƒ½æ’ä»¶ã€‚å®ƒæ·±åº¦é›†æˆäº† [Arthas](https://arthas.aliyun.com/)ï¼Œè®©ä½ æ— éœ€ç¦»å¼€ IDEï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥å¤æ‚çš„å‘½ä»¤è¡Œï¼Œå³å¯é€šè¿‡å³é”®èœå•ç›´æ¥è°ƒç”¨è¿è¡Œä¸­è¿›ç¨‹ï¼ˆSpring Boot/Java åº”ç”¨ï¼‰çš„ä»»æ„æ–¹æ³•ã€‚

å®ƒå°±åƒæ˜¯ç»™ä½ çš„æœ¬åœ°ä»£ç å’Œè¿è¡Œä¸­æœåŠ¡æ¶èµ·äº†ä¸€åº§**æ‰€è§å³æ‰€å¾—**çš„æ¡¥æ¢ã€‚

* * *

âœ¨ æ ¸å¿ƒç‰¹æ€§ (Features)
-----------------

*   **âš¡ï¸ å³é”®å³è¿è¡Œ (One-Click Execution)**

    *   ç›´æ¥åœ¨ Java æ–¹æ³•åä¸Šå³é”®ç‚¹å‡» `Ignite Run`ï¼Œå³å¯è§¦å‘è°ƒç”¨ã€‚

    *   è‡ªåŠ¨ç”Ÿæˆæ–¹æ³•çš„ Mock å…¥å‚ï¼ˆåŸºäº DataFakerï¼‰ã€‚

*   **ğŸ›  å¾®æœåŠ¡/å¤šè¿›ç¨‹æ”¯æŒ (Microservices Support)**

    *   æ™ºèƒ½è¯†åˆ«æ‰€æœ‰è¿è¡Œä¸­çš„ Java è¿›ç¨‹ã€‚

    *   é€šè¿‡ä¸‹æ‹‰æ¡†é€‰æ‹©ç›®æ ‡æœåŠ¡ï¼ˆæ˜¾ç¤ºæœåŠ¡åä¸ PIDï¼‰ï¼Œè½»æ¾è°ƒè¯•å¤šå®ä¾‹ç¯å¢ƒã€‚

*   **ğŸ“ å¼ºå¤§çš„å‚æ•°ç¼–è¾‘å™¨**

    *   å†…ç½® JSON é«˜äº®ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¯­æ³•æ£€æŸ¥ä¸æ ¼å¼åŒ–ã€‚

    *   **å‚æ•°è®°å¿†åŠŸèƒ½**ï¼šè‡ªåŠ¨ä¿å­˜ä¸Šæ¬¡æˆåŠŸè¿è¡Œçš„å‚æ•°ï¼Œæ‹’ç»é‡å¤è¾“å…¥ã€‚

*   **ğŸ“Š ä¸“ä¸šçº§æ§åˆ¶å°æŠ¥å‘Š (Dedicated Console)**

    *   æ‹¥æœ‰ä¸“å±çš„åº•éƒ¨å·¥å…·çª—å£ `Ignite Console`ã€‚

    *   è¾“å‡ºåƒ Postman ä¸€æ ·çš„æ‰§è¡ŒæŠ¥å‘Šï¼šåŒ…å«è°ƒç”¨æ—¶é—´ã€ç›®æ ‡æœåŠ¡ã€ç¾åŒ–åçš„å…¥å‚ JSON å’Œè¿”å›å€¼ JSONã€‚

    *   æ”¯æŒä¸€é”®æ¸…ç©ºæ—¥å¿—ã€‚

*   **ğŸ¤– è‡ªåŠ¨åŒ– Arthas æ³¨å…¥**

    *   å…¨è‡ªåŠ¨æ£€æµ‹å¹¶ Attach ç›®æ ‡è¿›ç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨ä¸‹è½½æˆ–å¯åŠ¨ Arthasã€‚

    *   é¦–æ¬¡è¿è¡Œè‡ªåŠ¨ä¸‹è½½ï¼Œåç»­è¿è¡Œæ¯«ç§’çº§å“åº”ã€‚

    *   æ”¯æŒä¸­æ–‡å‚æ•°ï¼Œè‡ªåŠ¨è½¬ä¹‰å¤„ç†ï¼Œæœç»ä¹±ç ã€‚

* * *

ğŸ“¸ æˆªå›¾é¢„è§ˆ (Screenshots)
---------------------

> _ï¼ˆå»ºè®®åœ¨æ­¤å¤„æ”¾ä¸€å¼ å³é”®èœå•å’Œå¼¹çª—çš„æˆªå›¾ï¼‰_

> _ï¼ˆå»ºè®®åœ¨æ­¤å¤„æ”¾ä¸€å¼ åº•éƒ¨æ§åˆ¶å°è¾“å‡ºç»“æœçš„æˆªå›¾ï¼‰_

* * *

ğŸ›  å®‰è£…æŒ‡å— (Installation)
----------------------

### ç¯å¢ƒè¦æ±‚

*   **IntelliJ IDEA**: 2023.2 æˆ–æ›´é«˜ç‰ˆæœ¬ (Community æˆ– Ultimate å‡å¯)

*   **JDK**: è¿è¡Œç¯å¢ƒéœ€ Java 17+ (ç›®æ ‡é¡¹ç›®å¯ä»¥æ˜¯ Java 8+)

*   **OS**: Windows / macOS / Linux

### ä»æºç æ„å»º

1. å…‹éš†æœ¬é¡¹ç›®ï¼š

   Bash

       git clone https://github.com/weihubeats/ignite-plugin.git

2. ä½¿ç”¨ Gradle æ„å»ºæ’ä»¶åŒ…ï¼š

   Bash

       ./gradlew clean buildPlugin

3. æ„å»ºæˆåŠŸåï¼Œåœ¨ `build/distributions/` ç›®å½•ä¸‹æ‰¾åˆ° `ignite-plugin-1.0-SNAPSHOT.zip`ã€‚

4. æ‰“å¼€ IDEA -> `Settings` -> `Plugins` -> âš™ï¸ å›¾æ ‡ -> `Install Plugin from Disk...`ï¼Œé€‰æ‹©è¯¥ zip åŒ…å®‰è£…ã€‚

* * *

ğŸ“– ä½¿ç”¨è¯´æ˜ (Usage)
---------------

1.  **å¯åŠ¨é¡¹ç›®**ï¼š åœ¨ IDEA ä¸­å¯åŠ¨ä½ çš„ Spring Boot æˆ– Java åº”ç”¨ç¨‹åºã€‚

2.  **é€‰æ‹©æ–¹æ³•**ï¼š æ‰“å¼€ä»»æ„ Java ç±»ï¼Œå°†å…‰æ ‡å®šä½åœ¨ä½ æƒ³æµ‹è¯•çš„**æ–¹æ³•å**ä¸Šã€‚

3.  **è§¦å‘è¿è¡Œ**ï¼š

    *   ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œé€‰æ‹©èœå•ä¸­çš„ **`Ignite Run`**ã€‚

    *   _(æˆ–è€…é…ç½®å¿«æ·é”®ä»¥æé«˜æ•ˆç‡)_

4.  **è°ƒæ•´å‚æ•°**ï¼š

    *   æ’ä»¶ä¼šå¼¹å‡ºä¸€ä¸ªé…ç½®çª—å£ã€‚

    *   **ç›®æ ‡æœåŠ¡**ï¼šåœ¨ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©ä½ è¦è°ƒè¯•çš„è¿›ç¨‹ï¼ˆå¦‚ `UserService (PID: 8080)`ï¼‰ã€‚

    *   **å…¥å‚ (JSON)**ï¼šç¼–è¾‘æ–¹æ³•çš„å…¥å‚ã€‚æ’ä»¶é»˜è®¤ä¼šç”Ÿæˆéšæœº Mock æ•°æ®ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ã€‚

5.  **æŸ¥çœ‹ç»“æœ**ï¼š ç‚¹å‡» `OK`ã€‚åº•éƒ¨ä¼šè‡ªåŠ¨å¼¹å‡º **Ignite Console** çª—å£ï¼Œæ˜¾ç¤ºç»“æ„åŒ–çš„æ‰§è¡ŒæŠ¥å‘Šã€‚

* * *

âš ï¸ å¸¸è§é—®é¢˜ (Troubleshooting)
-------------------------

**Q: ç‚¹å‡»è¿è¡Œåæç¤º "Wait Arthas response timeout"ï¼Ÿ**

> **A:** è¿™é€šå¸¸æ˜¯å› ä¸ºä½ çš„é¡¹ç›®å½“å‰æ­£å¤„äº **Debug æ–­ç‚¹æš‚åœ (Suspended)** çŠ¶æ€ã€‚ Arthas æ— æ³•åœ¨ JVM æš‚åœæ—¶æ‰§è¡Œä»£ç ã€‚è¯·å…ˆåœ¨ Debug çª—å£ç‚¹å‡» **Resume Program (F9)** æ”¾è¡Œæ–­ç‚¹ï¼Œç„¶åå†è¿è¡Œæ’ä»¶ã€‚

**Q: ç¬¬ä¸€æ¬¡è¿è¡Œéå¸¸æ…¢ï¼Ÿ**

> **A:** é¦–æ¬¡è¿è¡Œæ—¶ï¼Œæ’ä»¶éœ€è¦å»é˜¿é‡Œäº‘ä»“åº“ä¸‹è½½ Arthas çš„æ ¸å¿ƒåŒ…ï¼ˆçº¦ 10MBï¼‰ã€‚ä¸‹è½½å®Œæˆåï¼Œåç»­è¿è¡Œé€šå¸¸åœ¨ 100ms å†…å®Œæˆã€‚

**Q: æŠ¥é”™ `NoClassDefFoundError` æˆ– `ClassNotFoundException`ï¼Ÿ**

> **A:** ç¡®ä¿ä½ é€‰æ‹©äº†æ­£ç¡®çš„è¿›ç¨‹ã€‚å¦‚æœä½ åœ¨ `OrderService` çš„ä»£ç ä¸Šå³é”®ï¼Œå´é€‰æ‹©äº† `UserService` çš„è¿›ç¨‹ï¼ŒArthas ä¼šæ‰¾ä¸åˆ°å¯¹åº”çš„ç±»ã€‚

* * *

âš™ï¸ æŠ€æœ¯åŸç† (How it works)
----------------------

1. **Attach**: æ’ä»¶åˆ©ç”¨ Java Attach API å°† `arthas-boot.jar` æ³¨å…¥åˆ°ç›®æ ‡ JVMã€‚

2. **Command**: è§£æé€‰ä¸­çš„ PSI æ–¹æ³•ç»“æ„ï¼Œé€šè¿‡ `vmtool` å‘½ä»¤æ„å»º Ognl è¡¨è¾¾å¼ï¼š

   Bash

       vmtool --action getInstances --className com.xxx.Controller --express 'instances[0].method(args)'

3. **Communication**: é€šè¿‡ Telnet è¿æ¥åˆ° Arthas ç«¯å£ (3658)ï¼Œå‘é€æŒ‡ä»¤å¹¶è§£æå›åŒ…ã€‚

4. **Display**: æ¸…æ´— Telnet çš„åŸå§‹è¾“å‡ºï¼Œæå–è¿”å›å€¼å¹¶ç¾åŒ– JSONï¼Œé€šè¿‡ ToolWindow å±•ç¤ºã€‚

* * *

ğŸ¤ è´¡çŒ® (Contributing)
--------------------

æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼ å¦‚æœä½ æœ‰å¥½çš„æƒ³æ³•ï¼Œæ¯”å¦‚æ”¯æŒæ›´å¤š Arthas å‘½ä»¤ï¼ˆTrace, Watch ç­‰ï¼‰ï¼Œè¯·éšæ—¶è”ç³»ã€‚

ğŸ“„ è®¸å¯è¯ (License)
----------------

Apache 2.0 License